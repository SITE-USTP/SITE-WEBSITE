---
import Layout from "../layouts/Layout.astro";
import Hero from "../components/sections/Hero/Hero.astro";
import PostCard from "../components/cards/PostCard/PostCard.astro";
import { getCollection } from "astro:content";

const posts = (await getCollection("posts"))
	.sort((a, b) => b.data.pubDate.valueOf() - a.data.pubDate.valueOf())
	.slice(0, 3);
---

<Layout title="Home">
	<Hero />

	<section class="py-16">
		<div class="container mx-auto px-4">
			<div class="flex justify-between items-end mb-12">
				<div>
					<h2 class="text-3xl font-bold mb-2">
						Latest from the Blog
					</h2>
					<p class="text-gray-400">
						Insights, tutorials, and updates from our community.
					</p>
				</div>
				<a
					href="/blog"
					class="text-[var(--color-primary)] hover:underline font-mono"
					>View all posts &rarr;</a
				>
			</div>

			<div class="grid grid-cols-1 md:grid-cols-3 gap-8">
				{posts.map((post) => <PostCard post={post} />)}
			</div>
		</div>
	</section>

	<section class="py-16">
		<div class="container mx-auto px-4">
			<div class="flex justify-between items-end mb-12">
				<div>
					<h2 class="text-3xl font-bold mb-2">Upcoming Events</h2>
					<p class="text-gray-400">
						Join us for workshops, hackathons, and meetups.
					</p>
				</div>
				<a
					href="/events"
					class="text-[var(--color-primary)] hover:underline font-mono"
					>View calendar &rarr;</a
				>
			</div>

			<div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-8">
				{/* Placeholder for EventCards */}
				<div class="card border-l-4 border-l-[var(--color-accent)]">
					<div
						class="text-sm text-[var(--color-accent)] font-mono mb-2"
					>
						UPCOMING
					</div>
					<h3 class="text-xl font-bold mb-2">
						Tech Talk: Intro to Astro
					</h3>
					<p class="text-gray-400 mb-4">
						Learn how to build fast static sites with Astro.
					</p>
					<div class="flex items-center text-sm text-gray-500">
						<span class="mr-4">üìÖ Oct 15, 2023</span>
						<span>üìç USTP Auditorium</span>
					</div>
				</div>
			</div>
		</div>
	</section>
</Layout>
